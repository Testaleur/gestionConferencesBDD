<!DOCTYPE html>
<html>
<head>
  <title>Recherche conférences</title>
</head>

<body>
  <h1>Gestionnaire de conférences</h1>

  {% include "profile.html" %}
  <br><br>

  <h2>Recherche de conférences</h2>

  <!-- Recherche par les conférences du responsable -->
  {% if role == 'Responsable' %}
    <form method="post" action="{{ url_for('search_responsable_confs') }}">
      <input type="submit" value="Rechercher mes conférences">
    </form>
  {% endif %}
  <br>

  <!-- Recherche par mots-clés -->
  <form method="post">
    <input type="text" id="keywords" name="keywords" placeholder="Mots-clés"
      value="{{ filters.keywords if filters and filters.keywords }}">
    {% if role == 'Utilisateur' %}
      <button type = "button" onclick="fillWithProfile()">Remplir avec votre profil utilisateur</button>
    {% endif %}
    
    <br>
    <small>(exemple : bases data spatial)</small>
    <br>

    <br>
    <!-- Type -->
    <label>
      <input type="checkbox" name="type" value="Conference"
        {% if filters and 'Conference' in filters.type %}checked{% endif %}>
      Conférence
    </label>
    <label>
      <input type="checkbox" name="type" value="Workshop"
        {% if filters and 'Workshop' in filters.type %}checked{% endif %}>
      Workshop
    </label>

    <!-- Série -->
    <select name="serie">
      <option value="">Toutes les séries</option>
      <option value="SDH" {% if filters and filters.serie == 'SDH' %}selected{% endif %}>SDH</option>
      <option value="CAISE" {% if filters and filters.serie == 'CAISE' %}selected{% endif %}>CAISE</option>
      <option value="TedTalk" {% if filters and filters.serie == 'TedTalk' %}selected{% endif %}>TedTalk</option>
    </select>

    <br>
    <!-- Année -->
    <select name="year">
      <option value="">Toutes les années</option>
      <option value="2025" {% if filters and filters.year == '2025' %}selected{% endif %}>2025</option>
      <option value="2026" {% if filters and filters.year == '2026' %}selected{% endif %}>2026</option>
      <option value="2027" {% if filters and filters.year == '2027' %}selected{% endif %}>2027</option>
    </select>

    <br>
    <!-- Dates -->
    Commençant après le 
    <input type="date" name="date_start" value="{{ filters.date_start if filters and filters.date_start }}">
    <br>
    Se terminant avant le 
    <input type="date" name="date_end" value="{{ filters.date_end if filters and filters.date_end }}">
    <br>

    <!-- À venir / passées -->
    <select name="time_status">
      <option value="">Toutes</option>
      <option value="future" {% if filters and filters.time_status == 'future' %}selected{% endif %}>À venir</option>
      <option value="past" {% if filters and filters.time_status == 'past' %}selected{% endif %}>Passées</option>
    </select>


    <br><br>
    <input type="submit" value="Rechercher">
  </form>


  {% include "render.html" %}

  <script>
    function fillWithProfile() {
      const input = document.getElementById("keywords")
      input.value = "{{ profile }}"
    }
  </script>

</body>
</html>
